generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model well {
  id   String @id @default(uuid())
  name String @unique

  created_at DateTime @default(now())
  updated_at DateTime @default(now())

  oilfield   oilfield? @relation(fields: [oilfieldId], references: [id])
  oilfieldId String?

  oilfieldWells oilfield_wells[]
  calculations  calculation[]

  @@unique([id, oilfieldId])
}

model oilfield {
  id   String @id @default(uuid())
  name String

  created_at DateTime @default(now())
  updated_at DateTime @default(now())

  wells         well[]
  oilfieldWells oilfield_wells[]
}

model oilfield_wells {
  id         String @id @unique @default(cuid())
  oilfieldId String
  wellId     String

  oilfield oilfield @relation(fields: [oilfieldId], references: [id], onDelete: Cascade)
  well     well     @relation(fields: [wellId], references: [id], onDelete: Cascade)
}

model calculation {
  id String @id @unique @default(uuid())

  wellHeadPressure          Float
  depth                     Float
  fluidCompressibility      Float
  fluidDensity              Float
  pipeDiameter              Float
  inclinationAngle          Float
  sectionsNumber            Float
  moodyCoefficient          Float
  startLiquidRate           Float
  permeability              Float
  thickness                 Float
  fluidViscosity            Float
  fluidVoumeFactor          Float
  saturationPressure        Float
  averageReservoirePressure Float
  supplyContourRadius       Float
  wellRadius                Float
  skinFactor                Float

  created_at DateTime @default(now())
  updated_at DateTime @default(now())

  well   well?   @relation(fields: [wellId], references: [id])
  wellId String?

  calculation_result    calculation_result @relation(fields: [calculation_result_id], references: [id])
  calculation_result_id String             @unique
}

model calculation_result {
  id String @id @unique @default(uuid())

  result     Json
  created_at DateTime @default(now())

  calculation   calculation?
  calculationId String
}
